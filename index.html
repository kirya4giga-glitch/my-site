<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Мой сайт</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; text-align: center; padding: 20px; background-color: #f0f0f0; color: black; margin: 0; }
        .game-box {
            background: white; padding: 15px; border-radius: 15px; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); display: inline-block;
            margin-bottom: 20px; width: 95%; max-width: 400px; overflow: hidden;
        }

        /* --- СТИЛЬ ТЕЛЕГРАМ-ЧАТА --- */
        #cList {
            height: 300px; 
            overflow-y: auto; 
            background-image: url('https://e7.pngegg.com/pngimages/517/303/png-clipart-blue-and-white-abstract-illustration-telegram-messaging-app-background-pattern-area-text-blue-area-thumbnail.png');
            background-size: cover;
            padding: 10px; 
            border-radius: 10px; 
            display: flex; 
            flex-direction: column;
            border: 1px solid #ddd;
        }
        .message {
            max-width: 80%;
            margin-bottom: 8px;
            padding: 8px 12px;
            border-radius: 15px;
            font-size: 14px;
            position: relative;
            line-height: 1.4;
            word-wrap: break-word;
            text-align: left;
        }
        /* Сообщения слева (другие) */
        .msg-other {
            align-self: flex-start;
            background: white;
            color: black;
            border-bottom-left-radius: 2px;
        }
        /* Сообщения справа (твои) */
        .msg-my {
            align-self: flex-end;
            background: #efffde;
            color: black;
            border-bottom-right-radius: 2px;
            box-shadow: 0 1px 1px rgba(0,0,0,0.1);
        }
        .msg-name { font-weight: bold; font-size: 12px; color: #3390ec; display: block; margin-bottom: 2px; }
        .msg-time { font-size: 10px; color: #999; float: right; margin-top: 5px; margin-left: 8px; }

        .chat-input-area { display: flex; gap: 5px; margin-top: 10px; }
        .chat-input-area input { flex: 1; padding: 10px; border: 1px solid #ccc; border-radius: 20px; outline: none; }
        .send-btn { background: #3390ec; color: white; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; font-weight: bold; }

        /* --- ОСТАЛЬНЫЕ СТИЛИ (КЛИКЕР, ШАР И Т.Д.) --- */
        #score { font-size: 40px; font-weight: bold; color: #2ecc71; }
        .click-btn { padding: 15px; background: lime; border: none; border-radius: 10px; font-weight: bold; width: 100%; cursor: pointer; }
        canvas { background: #000; display: block; margin: 10px auto; width: 280px; height: 280px; }
        .s-btn { width: 50px; height: 50px; cursor: pointer; }
    </style>
</head>
<body>

    <h1>Мой сайт</h1>

    <div class="game-box">
        <h3>чат (прототип №1)</h3>
        <div id="cList">
            <div class="message msg-other">
                <span class="msg-name">Админ</span>
                Привет! Это прототип чата. Пока сообщения видишь только ты.
                <span class="msg-time">12:00</span>
            </div>
        </div>
        <div class="chat-input-area">
            <input type="text" id="nInp" placeholder="Имя" style="max-width: 80px;">
            <input type="text" id="mInp" placeholder="Сообщение...">
            <button class="send-btn" onclick="addC()">></button>
        </div>
    </div>

    <div class="game-box">
        <h3>Кликер</h3>
        <div id="score">0</div>
        <button class="click-btn" onclick="addScore()">КЛИК!</button>
    </div>

    <script>
        // --- ЛОГИКА КЛИКЕРА ---
        let count = parseInt(localStorage.getItem('myScore')) || 0;
        document.getElementById('score').innerText = count;
        function addScore() {
            count++; document.getElementById('score').innerText = count;
            localStorage.setItem('myScore', count);
        }

        // --- ЛОГИКА ЧАТА ---
        let coms = JSON.parse(localStorage.getItem('myComs')) || [];
        
        function showC() {
            const list = document.getElementById('cList');
            // Оставляем только приветствие админа, остальное чистим перед рендером
            list.innerHTML = `<div class="message msg-other"><span class="msg-name">Админ</span>Привет! Это прототип чата. Пока сообщения видишь только ты.<span class="msg-time">12:00</span></div>`;
            
            coms.forEach(c => {
                const now = new Date();
                const time = now.getHours() + ":" + (now.getMinutes()<10?'0':'') + now.getMinutes();
                list.innerHTML += `
                    <div class="message msg-my">
                        <span class="msg-name" style="color: #4caf50;">${c.n}</span>
                        ${c.m}
                        <span class="msg-time">${time}</span>
                    </div>`;
            });
            // Прокрутка вниз
            list.scrollTop = list.scrollHeight;
        }

        function addC() {
            const n = document.getElementById('nInp').value;
            const m = document.getElementById('mInp').value;
            if(n && m) {
                coms.push({n: n, m: m});
                localStorage.setItem('myComs', JSON.stringify(coms));
                document.getElementById('mInp').value = "";
                showC();
            }
        }
        showC();
    </script>
</body>
</html>
