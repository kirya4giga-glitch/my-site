<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ú–æ–π —Å–∞–π—Ç</title>
    <style>
        body { font-family: sans-serif; text-align: center; padding: 20px; background-color: #f0f0f0; color: black; margin: 0; }
        .button-tea { display: inline-block; padding: 10px 20px; background: #eee; text-decoration: none; color: black; border: 1px solid #ccc; border-radius: 5px; margin-bottom: 20px; cursor: pointer; }
        
        .game-box {
            background: white; padding: 20px; border-radius: 15px; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); display: inline-block;
            margin-bottom: 20px; width: 90%; max-width: 400px;
        }

        #score { font-size: 40px; font-weight: bold; color: #2ecc71; margin: 10px 0; }
        .click-btn { 
            padding: 15px 40px; font-size: 22px; background: lime; border: 2px solid #333; 
            border-radius: 15px; cursor: pointer; font-weight: bold; touch-action: manipulation; width: 80%; 
        }
        
        /* –ó–º–µ–π–∫–∞ */
        canvas { background: #000; border: 3px solid #333; display: block; margin: 10px auto; width: 280px; height: 280px; touch-action: none; }
        .snake-ctrl { display: grid; grid-template-columns: repeat(3, 60px); gap: 10px; justify-content: center; margin-top: 10px; }
        .s-btn { width: 60px; height: 60px; background: #fff; border: 1px solid #ccc; border-radius: 10px; font-size: 20px; cursor: pointer; }

        /* –ú–∞–≥–∏—á–µ—Å–∫–∏–π —à–∞—Ä */
        .magic-ball {
            width: 140px; height: 140px; background: radial-gradient(circle at 30% 30%, #444, #000);
            border-radius: 50%; margin: 15px auto; display: flex; align-items: center; 
            justify-content: center; color: white; font-size: 14px; cursor: pointer;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3); transition: 0.2s; padding: 10px;
        }

        input { width: 80%; padding: 10px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 5px; }
        .comment-item { background: #f9f9f9; border-left: 4px solid lime; padding: 10px; margin-top: 10px; text-align: left; font-size: 14px; }
        .reset-link { color: red; text-decoration: underline; cursor: pointer; font-size: 14px; margin-top: 15px; display: block; }
    </style>
</head>
<body>

    <h1>–ú–æ–π –ø–µ—Ä–≤—ã–π —Å–∞–π—Ç!</h1>
    <div class="button-tea" onclick="alert('—Å–∫–∏–Ω—É—Ç—å –±—É–¥—É—â–µ–º—É –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—É –Ω–∞ —á–∞–π: +79216274225 —Å–±–µ—Ä–±–∞–Ω–∫')">–ù–∞–∂–º–∏ —Å—é–¥–∞</div>

    <hr>

    <div class="game-box">
        <h3>–ò–≥—Ä–∞ ‚Ññ1: –ö–ª–∏–∫–µ—Ä</h3>
        <div id="score">0</div>
        <button class="click-btn" id="clickBtn">–ö–õ–ò–ö!</button>
        <div class="reset-link" id="resetBtn">–æ–±–Ω—É–ª–∏—Ç—å —Å—á–µ—Ç</div>
    </div>

    <div class="game-box">
        <h3>–ò–≥—Ä–∞ ‚Ññ2: –ó–º–µ–π–∫–∞</h3>
        <canvas id="snakeGame" width="400" height="400"></canvas>
        <div class="snake-ctrl">
            <div></div><button class="s-btn" onclick="setD('up')">‚ñ≤</button><div></div>
            <button class="s-btn" onclick="setD('left')">‚óÄ</button>
            <button class="s-btn" onclick="setD('down')">‚ñº</button>
            <button class="s-btn" onclick="setD('right')">‚ñ∂</button>
        </div>
    </div>

    <div class="game-box">
        <h3>–ò–≥—Ä–∞ ‚Ññ3: –ú–∞–≥–∏—á–µ—Å–∫–∏–π –®–∞—Ä üé±</h3>
        <div class="magic-ball" id="magicBall">–ó–∞–¥–∞–π –≤–æ–ø—Ä–æ—Å –∏ –∂–º–∏!</div>
    </div>

    <div class="game-box">
        <h3>—á–∞—Ç (–ø—Ä–æ—Ç–æ—Ç–∏–ø –Ω–æ–º–µ—Ä 1)</h3>
        <input type="text" id="nInp" placeholder="–ò–º—è">
        <input type="text" id="mInp" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ">
        <button class="click-btn" style="font-size: 16px; padding: 10px;" onclick="addC()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        <div id="cList"></div>
    </div>

    <script>
        // --- –ö–õ–ò–ö–ï–† ---
        let count = parseInt(localStorage.getItem('myScore')) || 0;
        document.getElementById('score').innerText = count;
        document.getElementById('clickBtn').onclick = () => {
            count++; document.getElementById('score').innerText = count;
            localStorage.setItem('myScore', count);
        };
        document.getElementById('resetBtn').onclick = () => { if(confirm("–°–±—Ä–æ—Å–∏—Ç—å?")) { count=0; document.getElementById('score').innerText=0; localStorage.removeItem('myScore'); }};

        // --- –ó–ú–ï–ô–ö–ê ---
        const canvas = document.getElementById("snakeGame");
        const ctx = canvas.getContext("2d");
        const box = 20;
        let snake = [{x: 10 * box, y: 10 * box}];
        let food = { x: Math.floor(Math.random()*19+1)*box, y: Math.floor(Math.random()*19+1)*box };
        let d = "";

        function setD(newD) {
            if(newD=="left" && d!="right") d="left";
            if(newD=="up" && d!="down") d="up";
            if(newD=="right" && d!="left") d="right";
            if(newD=="down" && d!="up") d="down";
        }
        document.addEventListener("keydown", (e) => {
            if(e.keyCode==37) setD("left"); if(e.keyCode==38) setD("up");
            if(e.keyCode==39) setD("right"); if(e.keyCode==40) setD("down");
        });

        function draw() {
            ctx.fillStyle = "black"; ctx.fillRect(0,0,400,400);
            ctx.fillStyle = "red"; ctx.fillRect(food.x, food.y, box, box);
            for(let i=0; i<snake.length; i++) {
                ctx.fillStyle = (i==0) ? "lime" : "green";
                ctx.fillRect(snake[i].x, snake[i].y, box, box);
            }
            let sX = snake[0].x; let sY = snake[0].y;
            if(d=="left") sX-=box; if(d=="up") sY-=box; if(d=="right") sX+=box; if(d=="down") sY+=box;
            if(sX==food.x && sY==food.y) {
                food = { x: Math.floor(Math.random()*19+1)*box, y: Math.floor(Math.random()*19+1)*box };
            } else if(d!="") { snake.pop(); }
            if(d!="") {
                let head = {x:sX, y:sY};
                if(sX<0 || sX>=400 || sY<0 || sY>=400 || snake.some(s => s.x==head.x && s.y==head.y)) {
                    d=""; snake=[{x: 10*box, y: 10*box}]; alert("Game Over!");
                } else { snake.unshift(head); }
            }
        }
        setInterval(draw, 150);

        // --- –®–ê–† ---
        const ball = document.getElementById('magicBall');
        const ans = ["–î–∞", "–ù–µ—Ç", "–í–æ–∑–º–æ–∂–Ω–æ", "100%", "–ù–∏–∫–æ–≥–¥–∞", "–ü–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞"];
        ball.onclick = () => {
            ball.innerText = "...";
            setTimeout(() => { ball.innerText = ans[Math.floor(Math.random()*ans.length)]; }, 400);
        };

        // --- –ß–ê–¢ ---
        let coms = JSON.parse(localStorage.getItem('myComs')) || [];
        function showC() {
            const list = document.getElementById('cList');
            list.innerHTML = "";
            coms.slice().reverse().forEach(c => { list.innerHTML += `<div class="comment-item"><b>${c.n}:</b> ${c.m}</div>`; });
        }
        function addC() {
            const n = document.getElementById('nInp').value;
            const m = document.getElementById('mInp').value;
            if(n && m) { coms.push({n:n, m:m}); localStorage.setItem('myComs', JSON.stringify(coms)); document.getElementById('nInp').value=""; document.getElementById('mInp').value=""; showC(); }
        }
        showC();
    </script>
</body>
</html>
