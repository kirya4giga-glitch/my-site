<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ú–æ–π —Å—É–ø–µ—Ä —Å–∞–π—Ç</title>
    <script src="https://js-dos.com/v7/build/releases/latest/js-dos.js"></script>
    <style>
        :root {
            --bg-color: #0a0a0a;
            --main-color: #0F0;
            --box-bg: rgba(10, 25, 10, 0.6);
            --text-color: #0F0;
        }

        body.theme-tg { --bg-color: #17212b; --main-color: #5288c1; --box-bg: #242f3d; --text-color: #fff; }
        body.theme-light { --bg-color: #f0f2f5; --main-color: #0088cc; --box-bg: #ffffff; --text-color: #000; }

        body { 
            font-family: 'Consolas', monospace; text-align: center; padding: 20px; 
            background-color: var(--bg-color); color: var(--text-color); margin: 0; overflow-x: hidden;
            transition: 0.3s;
        }

        .settings-btn {
            position: fixed; top: 15px; right: 15px; z-index: 100;
            cursor: pointer; background: var(--box-bg); padding: 8px; border-radius: 10px; border: 1px solid var(--main-color);
        }
        .settings-menu {
            display: none; position: fixed; top: 60px; right: 15px; z-index: 101;
            background: var(--box-bg); padding: 15px; border-radius: 10px; border: 1px solid var(--main-color);
            text-align: left; box-shadow: 0 0 15px rgba(0,0,0,0.5); width: 200px;
        }
        .settings-menu select, .settings-menu button { 
            background: #000; color: #0F0; border: 1px solid #0F0; margin-bottom: 10px; width: 100%; cursor: pointer;
        }

        h1, h2 { color: var(--main-color); text-shadow: 0 0 5px var(--main-color); }
        .game-box {
            background: var(--box-bg); padding: 20px; border-radius: 15px; 
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.2); display: inline-block;
            margin-bottom: 30px; width: 95%; max-width: 450px;
            border: 1px solid var(--main-color); position: relative; z-index: 2;
        }
        .button-tea { 
            display: inline-block; padding: 12px 25px; background: rgba(0, 200, 0, 0.2); 
            color: var(--main-color); border: 1px solid var(--main-color); border-radius: 8px; 
            margin-bottom: 25px; cursor: pointer; font-weight: bold;
        }

        #cList {
            height: 250px; overflow-y: auto; background: rgba(0, 0, 0, 0.5); 
            padding: 10px; border-radius: 10px; display: flex; flex-direction: column; border: 1px solid var(--main-color);
        }
        .message {
            max-width: 85%; margin-bottom: 8px; padding: 8px 12px; border-radius: 12px; font-size: 14px;
            background: rgba(0, 255, 0, 0.1); border: 1px solid rgba(0,255,0,0.2); align-self: flex-start; text-align: left;
        }
        .message img { max-width: 100%; border-radius: 10px; margin-top: 5px; display: block; }
        .del-btn { color: #ff4d4d; cursor: pointer; margin-left: 10px; }
        .chat-input-area { display: flex; gap: 5px; margin-top: 15px; }
        .chat-input-area input { flex: 1; padding: 10px; border: 1px solid var(--main-color); border-radius: 20px; background: #000; color: #0F0; outline: none; }
        .send-btn { background: var(--main-color); color: #000; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; font-weight: bold; }

        #leaderboard { margin-top: 15px; font-size: 14px; text-align: left; border-top: 1px solid var(--main-color); padding-top: 10px; }
        .leader-item { display: flex; justify-content: space-between; padding: 2px 0; }

        canvas#snakeGame { background: #000; display: block; margin: 10px auto; width: 280px; height: 280px; border: 1px solid var(--main-color); }
        #doom-container { width: 100%; height: 300px; background: #000; border: 2px solid var(--main-color); margin-top: 10px; }
        #matrixCanvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background-color: #000; }
        .doom-controls { font-size: 11px; margin-top: 8px; color: #ff4d4d; font-weight: bold; }
    </style>
</head>
<body>

    <canvas id="matrixCanvas"></canvas>

    <div class="settings-btn" onclick="toggleSettings()">‚öôÔ∏è <span id="set-txt">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span></div>
    <div class="settings-menu" id="sMenu">
        <label id="set-theme">–¢–µ–º–∞:</label>
        <select onchange="changeTheme(this.value)">
            <option value="hacker">Hacker (Green)</option>
            <option value="tg">Telegram (Blue)</option>
            <option value="light">Light (Day)</option>
        </select>
        <label id="set-lang">–Ø–∑—ã–∫:</label>
        <select onchange="changeLang(this.value)">
            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
            <option value="en">English</option>
            <option value="ua">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option>
        </select>
        <hr style="border: 0.5px solid var(--main-color)">
        <button onclick="showThanks()" id="btn-thanks">–û—Å–æ–±–∞—è –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å</button>
    </div>
    
    <h1 id="h-title">–ú–æ–π –ø–µ—Ä–≤—ã–π —Å–∞–π—Ç</h1>
    <h2 id="h-subtitle">–î–µ–ª–∞–ª —Å–∞–º —á–µ—Å—Ç–Ω–æ!</h2>
    <div class="button-tea" id="btn-tea" onclick="alert('—Å–∫–∏–Ω—É—Ç—å –Ω–∞ —á–∞–π –±—É–¥—É—â–µ–º—É –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—É:\n+79216274225 –°–±–µ—Ä–±–∞–Ω–∫')">–ù–∞–∂–º–∏!</div>

    <div class="game-box">
        <h3 id="h-chat">–ß–∞—Ç (v4)</h3>
        <div id="cList"></div>
        <div class="chat-input-area">
            <input type="text" id="nInp" placeholder="–ò–º—è" style="width: 80px;">
            <input type="text" id="mInp" placeholder="–¢–µ–∫—Å—Ç –∏–ª–∏ —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ...">
            <button class="send-btn" onclick="addC()">></button>
        </div>
    </div>

    <div class="game-box">
        <h3 id="h-click">–ö–ª–∏–∫–µ—Ä</h3>
        <div id="score" style="font-size: 35px; font-weight: bold;">0</div>
        <button class="button-tea" onclick="addScore()" id="btn-click">–ö–õ–ò–ö–ù–ò!</button>
        <div style="color: #ff4d4d; text-decoration: underline; cursor: pointer; font-size: 11px; margin-top: 5px;" onclick="resetScore()">–æ–±–Ω—É–ª–∏—Ç—å —Å—á–µ—Ç</div>
        
        <div id="leaderboard">
            <b id="h-top">–¢–û–ü –ò–ì–†–û–ö–û–í:</b>
            <div id="leaders-list">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </div>

    <div class="game-box">
        <h3 id="h-snake">–ó–º–µ–π–∫–∞</h3>
        <canvas id="snakeGame" width="400" height="400"></canvas>
        <button class="button-tea" style="padding: 10px 20px;" onclick="setD('up')">‚ñ≤</button><br>
        <button class="button-tea" style="padding: 10px 20px;" onclick="setD('left')">‚óÄ</button>
        <button class="button-tea" style="padding: 10px 20px;" onclick="setD('down')">‚ñº</button>
        <button class="button-tea" style="padding: 10px 20px;" onclick="setD('right')">‚ñ∂</button>
    </div>

    <div class="game-box">
        <h3>DOOM (1993)</h3>
        <div id="doom-container"></div>
        <div class="doom-controls">
            ‚ö†Ô∏è –¢–û–õ–¨–ö–û –î–õ–Ø –ü–ö!<br>
            –•–æ–¥–∏—Ç—å: —Å—Ç—Ä–µ–ª–∫–∏ | –°—Ç—Ä–µ–ª—è—Ç—å: Ctrl | –û—Ç–∫—Ä—ã—Ç—å –¥–≤–µ—Ä—å: –ü—Ä–æ–±–µ–ª | –ë–µ–≥: Shift
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, push, onValue, remove, get, set, query, orderByChild, limitToLast } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyChSk0gETRBQ391e4BjPqFsKc_dzjBmT58",
            authDomain: "my-chat-52203.firebaseapp.com",
            databaseURL: "https://my-chat-52203-default-rtdb.firebaseio.com",
            projectId: "my-chat-52203",
            appId: "1:336944595953:web:24bfdf5041fc2040d17a50"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        let currentSessionPass = ""; 

        window.addC = async function() {
            const n = document.getElementById('nInp').value.trim();
            let m = document.getElementById('mInp').value.trim();
            if(!n || !m) return;
            const uRef = ref(db, 'users/' + n);
            if (!currentSessionPass) {
                const snap = await get(uRef);
                if(snap.exists()){
                    const p = prompt("–ü–∞—Ä–æ–ª—å:");
                    if(p !== snap.val().password) return alert("–ù–µ–≤–µ—Ä–Ω–æ!");
                    currentSessionPass = p;
                } else {
                    const np = prompt("–ü—Ä–∏–¥—É–º–∞–π –ø–∞—Ä–æ–ª—å:");
                    if(!np) return;
                    await set(uRef, {password: np, score: 0});
                    currentSessionPass = np;
                }
            }
            let imgUrl = null;
            if (m.match(/\.(jpeg|jpg|gif|png)$/) != null) { imgUrl = m; m = ""; }
            const now = new Date();
            push(ref(db, 'chat_messages'), { name: n, text: m, image: imgUrl, time: now.getHours() + ":" + (now.getMinutes()<10?'0':'') + now.getMinutes() });
            document.getElementById('mInp').value = "";
        };

        onValue(ref(db, 'chat_messages'), (s) => {
            const list = document.getElementById('cList');
            list.innerHTML = "";
            const data = s.val();
            for(let id in data) {
                let img = data[id].image ? `<img src="${data[id].image}">` : "";
                list.innerHTML += `<div class="message"><b>${data[id].name}</b> <span class="del-btn" onclick="deleteMsg('${id}')">√ó</span><br>${data[id].text} ${img} <small style="display:block;text-align:right">${data[id].time}</small></div>`;
            }
            list.scrollTop = list.scrollHeight;
        });

        window.addScore = async function() {
            let count = parseInt(document.getElementById('score').innerText) + 1;
            document.getElementById('score').innerText = count;
            const n = document.getElementById('nInp').value.trim();
            if(n && currentSessionPass) {
                const sRef = ref(db, 'users/' + n + '/score');
                const snap = await get(sRef);
                if(!snap.exists() || count > snap.val()) await set(sRef, count);
            }
        };

        window.resetScore = async function() {
            const n = document.getElementById('nInp').value.trim();
            if(!n || !currentSessionPass) return alert("–°–Ω–∞—á–∞–ª–∞ –≤–æ–π–¥–∏ –≤ —á–∞—Ç!");
            if(confirm("–û–±–Ω—É–ª–∏—Ç—å —Ä–µ–∫–æ—Ä–¥?")) {
                document.getElementById('score').innerText = 0;
                await set(ref(db, 'users/' + n + '/score'), 0);
            }
        };

        const topQ = query(ref(db, 'users'), orderByChild('score'), limitToLast(5));
        onValue(topQ, (s) => {
            const list = document.getElementById('leaders-list');
            list.innerHTML = ""; let arr = [];
            s.forEach(c => { arr.push({name: c.key, score: c.val().score || 0}); });
            arr.reverse().forEach((u, i) => {
                list.innerHTML += `<div class="leader-item"><span>${i+1}. ${u.name}</span> <b>${u.score} –∫–ª–∏–∫–æ–≤</b></div>`;
            });
        });

        window.deleteMsg = (id) => { if(prompt("–ê–¥–º–∏–Ω-–ø–∞—Ä–æ–ª—å:") === "8070") remove(ref(db, 'chat_messages/' + id)); };
    </script>

    <script>
        function toggleSettings() { 
            const m = document.getElementById('sMenu');
            m.style.display = m.style.display === 'block' ? 'none' : 'block';
        }
        function showThanks() { alert("–û–°–û–ë–ê–Ø –ë–õ–ê–ì–û–î–ê–†–ù–û–°–¢–¨:\n\n1. –ê–Ω–∞—Å—Ç–∞—Å–∏–µ –∑–µ–º–ª–µ—Ä–æ–π–∫–µ\n2. –í–∞–¥–µ–∫—É\n3. –ê–Ω–¥—Ä—é—Ö–µ üòé\n4. –°–∞—à–µ"); }
        function changeTheme(v) {
            document.body.className = v === 'hacker' ? '' : 'theme-' + v;
            document.getElementById('matrixCanvas').style.display = (v === 'hacker') ? 'block' : 'none';
        }
        const langs = {
            ru: { title: "–ú–æ–π –ø–µ—Ä–≤—ã–π —Å–∞–π—Ç", subtitle: "–î–µ–ª–∞–ª —Å–∞–º —á–µ—Å—Ç–Ω–æ!", chat: "–ß–∞—Ç", click: "–ö–ª–∏–∫–µ—Ä", snake: "–ó–º–µ–π–∫–∞", settings: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏", top: "–¢–û–ü –ò–ì–†–û–ö–û–í:" },
            en: { title: "My First Site", subtitle: "Made it myself!", chat: "Chat", click: "Clicker", snake: "Snake", settings: "Settings", top: "TOP PLAYERS:" },
            ua: { title: "–ú—ñ–π –ø–µ—Ä—à–∏–π —Å–∞–π—Ç", subtitle: "–†–æ–±–∏–≤ —Å–∞–º —á–µ—Å–Ω–æ!", chat: "–ß–∞—Ç", click: "–ö–ª—ñ–∫–µ—Ä", snake: "–ó–º—ñ–π–∫–∞", settings: "–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è", top: "–¢–û–ü –ì–†–ê–í–¶–Ü–í:" }
        };
        function changeLang(l) {
            document.getElementById('h-title').innerText = langs[l].title;
            document.getElementById('h-subtitle').innerText = langs[l].subtitle;
            document.getElementById('h-chat').innerText = langs[l].chat;
            document.getElementById('h-click').innerText = langs[l].click;
            document.getElementById('h-snake').innerText = langs[l].snake;
            document.getElementById('set-txt').innerText = langs[l].settings;
            document.getElementById('h-top').innerText = langs[l].top;
        }

        const sCanvas = document.getElementById("snakeGame");
        const sCtx = sCanvas.getContext("2d");
        let snake = [{x: 200, y: 200}], food = {x: 100, y: 100}, d = "";
        window.setD = (v) => d = v;
        function drawS() {
            sCtx.fillStyle = "#000"; sCtx.fillRect(0,0,400,400);
            sCtx.fillStyle = "red"; sCtx.fillRect(food.x, food.y, 20, 20);
            snake.forEach((s, i) => {
                sCtx.fillStyle = (i === 0) ? "#ADFF2F" : "#008000"; 
                sCtx.fillRect(s.x, s.y, 20, 20);
                sCtx.strokeStyle = "#000"; sCtx.strokeRect(s.x, s.y, 20, 20);
            });
            let hX = snake[0].x, hY = snake[0].y;
            if(d=="up") hY-=20; if(d=="down") hY+=20; if(d=="left") hX-=20; if(d=="right") hX+=20;
            if(hX==food.x && hY==food.y) food = {x: Math.floor(Math.random()*19)*20, y: Math.floor(Math.random()*19)*20}; else if(d) snake.pop();
            if(d) {
                if(hX<0 || hX>=400 || hY<0 || hY>=400 || snake.some(s=>s.x==hX && s.y==hY)) { d=""; snake=[{x:200,y:200}]; alert("Game Over!"); }
                else snake.unshift({x:hX, y:hY});
            }
        }
        setInterval(drawS, 150);

        const mCanvas = document.getElementById('matrixCanvas');
        const mCtx = mCanvas.getContext('2d');
        mCanvas.width = window.innerWidth; mCanvas.height = window.innerHeight;
        const drops = Array(Math.floor(mCanvas.width/16)).fill(1);
        function drawM() {
            mCtx.fillStyle = 'rgba(0, 0, 0, 0.05)'; mCtx.fillRect(0, 0, mCanvas.width, mCanvas.height);
            mCtx.fillStyle = '#0F0'; mCtx.font = '16px monospace';
            drops.forEach((y, i) => {
                mCtx.fillText(Math.random() > 0.5 ? '0' : '1', i * 16, y * 16);
                if (y * 16 > mCanvas.height && Math.random() > 0.975) drops[i] = 0;
                drops[i]++;
            });
        }
        setInterval(drawM, 33);
        Dos(document.getElementById("doom-container"), { style: "none" }).run("https://js-dos.com/v7/build/archive/doom.zip");
    </script>
</body>
</html>
